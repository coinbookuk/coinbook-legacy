{"ast":null,"code":"var _jsxFileName = \"/Users/amit/Desktop/Coinbook-master/src/components/Chart/Chart.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport \"./Chart.css\";\nimport MoonPayPopup from \"../MoonPayPopup.js\";\nimport { withTheme } from \"@material-ui/core\";\n\nconst Chart = props => {\n  const [chartData, setChartData] = useState({});\n  const [chartVol, setChartVol] = useState({});\n  const [id] = useState(props.id);\n  const [coinsOnMoonPay] = useState(props.coinsOnMoonPay);\n  const [currency] = useState(props.currency);\n  const [symbol] = useState(props.currencysymbols);\n  const [days] = useState(props.days);\n  const [redraw, setRedraw] = useState({});\n\n  const convertToBillions = number => {\n    if (number > 1000000) {\n      return (number / 1000000000).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \"B\";\n    } else {\n      return number;\n    }\n  };\n\n  const mobileOrNot = () => {\n    let width = window.innerWidth;\n\n    if (width > 768) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    } else {\n      return /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n\n  const chart = props => {\n    let daysChart = props.days;\n    let currency = props.currency;\n    let symbol = props.currencysymbols;\n    let time = [];\n    let price = [];\n    let priceSmaller = [];\n    let volume = [];\n    let volumeSmaller = [];\n    let timeSmaller = [];\n    let timeSmallerAndConvertedForVolume = [];\n    let timeSmallerAndConverted = [];\n    let whichCoin = id;\n\n    function roundDownPrice(number) {\n      if (number >= 1) {\n        const decimals = 2;\n        const amount = Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals);\n        return amount.toFixed(2);\n      } else if (number >= 0.001) {\n        const decimals = 6;\n        return Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals).toFixed(4);\n      } else {\n        const decimals = 9;\n        return Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals);\n      }\n    }\n\n    axios.get(`https://api.coingecko.com/api/v3/coins/${whichCoin}/market_chart?vs_currency=${currency}&days=${daysChart}`).then(res => {\n      console.log(res);\n\n      for (const dataObj of res.data.prices) {\n        time.push(dataObj[0]);\n        price.push(dataObj[1]);\n      }\n\n      console.log(price);\n\n      for (var i = 0; i < price.length; i = i + 1) {\n        priceSmaller.push(roundDownPrice(price[i]));\n      }\n\n      for (var i = 0; i < time.length; i++) {\n        timeSmaller.push(time[i]);\n      }\n\n      for (var i = 0; i < timeSmaller.length; i++) {\n        timeSmallerAndConverted.push(moment(timeSmaller[i]).format(\"lll\"));\n      }\n\n      for (const dataObj of res.data.total_volumes) {\n        time.push(dataObj[0]);\n        volume.push(dataObj[1]);\n      }\n\n      console.log(volume);\n\n      for (var i = 0; i < volume.length; i = i + 4) {\n        volumeSmaller.push(volume[i]);\n      }\n\n      for (var i = 0; i < timeSmallerAndConverted.length; i = i + 4) {\n        timeSmallerAndConvertedForVolume.push(timeSmallerAndConverted[i]);\n      }\n\n      setChartData({\n        labels: timeSmallerAndConverted,\n        datasets: [{\n          label: \"Price\",\n          backgroundColor: \"#5C68FF\",\n          borderWidth: \"0px\",\n          data: priceSmaller\n        }]\n      });\n      setChartVol({\n        labels: timeSmallerAndConvertedForVolume,\n        datasets: [{\n          label: \"Volume\",\n          backgroundColor: \"#323232\",\n          borderColor: \"rgba(135, 99, 225, 1)\",\n          data: volumeSmaller\n        }]\n      });\n      setRedraw(true);\n      setRedraw(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    chart(props);\n  }, [props]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"charts-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"charts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"chart-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(Line, {\n    redraw: redraw,\n    data: chartData,\n    options: {\n      legend: {\n        display: false\n      },\n      tooltips: {\n        displayColors: false,\n        mode: \"x-axis\",\n        backgroundColor: \"#FFFFFF\",\n        bodyFontColor: \"#323232\",\n        titleFontColor: \"#323232\",\n        borderWidth: 1,\n        borderColor: \"#F0F0F0\",\n        callbacks: {\n          label: function (tooltipItems) {\n            if (tooltipItems.yLabel > 1) {\n              return symbol + tooltipItems.yLabel.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n            } else {\n              return symbol + tooltipItems.yLabel.toString();\n            }\n          }\n        }\n      },\n      responsive: true,\n      title: {\n        text: \"THICCNESS SCALE\",\n        display: false\n      },\n      elements: {\n        point: {\n          radius: 4\n        },\n        line: {\n          tension: 0.05\n        }\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            autoSkip: true,\n            maxTicksLimit: 10,\n            beginAtZero: false,\n            fontColor: \"#323232\",\n            callback: function (value) {\n              if (value > 1) {\n                return props.currencysymbols + value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n              } else {\n                return props.currencysymbols + value.toString();\n              }\n            }\n          },\n          gridLines: {\n            display: false\n          }\n        }],\n        xAxes: [{\n          ticks: {\n            maxTicksLimit: 4,\n            maxRotation: 0,\n            minRotation: 0,\n            fontColor: \"#323232\",\n            callback: function (value) {\n              return value.split(\",\")[0];\n            }\n          },\n          gridLines: {\n            display: false\n          }\n        }]\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  })), mobileOrNot(), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"charts-vol\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"chart-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, \"Volume\"), /*#__PURE__*/React.createElement(Bar, {\n    redraw: redraw,\n    data: chartVol,\n    options: {\n      legend: {\n        display: false\n      },\n      tooltips: {\n        displayColors: false,\n        mode: \"x-axis\",\n        backgroundColor: \"#FFFFFF\",\n        bodyFontColor: \"#323232\",\n        titleFontColor: \"#323232\",\n        borderWidth: 1,\n        borderColor: \"#F0F0F0\",\n        callbacks: {\n          label: function (tooltipItems) {\n            return symbol + tooltipItems.yLabel.toFixed(0).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n          }\n        }\n      },\n      responsive: true,\n      title: {\n        text: \"THICCNESS SCALE\",\n        display: false\n      },\n      elements: {\n        point: {\n          radius: 0\n        },\n        line: {\n          tension: 0.05\n        }\n      },\n      scales: {\n        yAxes: [{\n          ticks: {\n            autoSkip: true,\n            maxTicksLimit: 10,\n            beginAtZero: false,\n            fontColor: \"#323232\",\n            callback: function (value) {\n              return props.currencysymbols + convertToBillions(value);\n            }\n          },\n          gridLines: {\n            display: false\n          }\n        }],\n        xAxes: [{\n          ticks: {\n            maxTicksLimit: 4,\n            maxRotation: 0,\n            minRotation: 0,\n            fontColor: \"#323232\",\n            callback: function (value) {\n              return value.split(\",\")[0];\n            }\n          },\n          gridLines: {\n            display: false\n          }\n        }]\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Chart;","map":{"version":3,"sources":["/Users/amit/Desktop/Coinbook-master/src/components/Chart/Chart.js"],"names":["React","useState","useEffect","Line","Bar","axios","moment","MoonPayPopup","withTheme","Chart","props","chartData","setChartData","chartVol","setChartVol","id","coinsOnMoonPay","currency","symbol","currencysymbols","days","redraw","setRedraw","convertToBillions","number","toString","replace","mobileOrNot","width","window","innerWidth","chart","daysChart","time","price","priceSmaller","volume","volumeSmaller","timeSmaller","timeSmallerAndConvertedForVolume","timeSmallerAndConverted","whichCoin","roundDownPrice","decimals","amount","Math","floor","pow","toFixed","get","then","res","console","log","dataObj","data","prices","push","i","length","format","total_volumes","labels","datasets","label","backgroundColor","borderWidth","borderColor","catch","err","legend","display","tooltips","displayColors","mode","bodyFontColor","titleFontColor","callbacks","tooltipItems","yLabel","responsive","title","text","elements","point","radius","line","tension","scales","yAxes","ticks","autoSkip","maxTicksLimit","beginAtZero","fontColor","callback","value","gridLines","xAxes","maxRotation","minRotation","split"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport \"./Chart.css\";\nimport MoonPayPopup from \"../MoonPayPopup.js\";\nimport { withTheme } from \"@material-ui/core\";\n\nconst Chart = (props) => {\n  const [chartData, setChartData] = useState({});\n  const [chartVol, setChartVol] = useState({});\n  const [id] = useState(props.id);\n  const [coinsOnMoonPay] = useState(props.coinsOnMoonPay);\n  const [currency] = useState(props.currency);\n  const [symbol] = useState(props.currencysymbols);\n  const [days] = useState(props.days);\n  const [redraw, setRedraw] = useState({});\n  const convertToBillions = (number) => {\n    if (number > 1000000) {\n      return (\n        (number / 1000000000).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") +\n        \"B\"\n      );\n    } else {\n      return number;\n    }\n  };\n  const mobileOrNot = () => {\n    let width = window.innerWidth;\n    if (width > 768) {\n      return <></>;\n    } else {\n      return <br />;\n    }\n  };\n  const chart = (props) => {\n    let daysChart = props.days;\n    let currency = props.currency;\n    let symbol = props.currencysymbols;\n    let time = [];\n    let price = [];\n    let priceSmaller = [];\n    let volume = [];\n    let volumeSmaller = [];\n    let timeSmaller = [];\n    let timeSmallerAndConvertedForVolume = [];\n\n    let timeSmallerAndConverted = [];\n    let whichCoin = id;\n    function roundDownPrice(number) {\n      if (number >= 1) {\n        const decimals = 2;\n        const amount =\n          Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals);\n        return amount.toFixed(2);\n      } else if (number >= 0.001) {\n        const decimals = 6;\n        return (\n          Math.floor(number * Math.pow(10, decimals)) /\n          Math.pow(10, decimals).toFixed(4)\n        );\n      } else {\n        const decimals = 9;\n        return (\n          Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals)\n        );\n      }\n    }\n    axios\n      .get(\n        `https://api.coingecko.com/api/v3/coins/${whichCoin}/market_chart?vs_currency=${currency}&days=${daysChart}`\n      )\n      .then((res) => {\n        console.log(res);\n        for (const dataObj of res.data.prices) {\n          time.push(dataObj[0]);\n          price.push(dataObj[1]);\n        }\n        console.log(price);\n\n        for (var i = 0; i < price.length; i = i + 1) {\n          priceSmaller.push(roundDownPrice(price[i]));\n        }\n        for (var i = 0; i < time.length; i++) {\n          timeSmaller.push(time[i]);\n        }\n        for (var i = 0; i < timeSmaller.length; i++) {\n          timeSmallerAndConverted.push(moment(timeSmaller[i]).format(\"lll\"));\n        }\n        for (const dataObj of res.data.total_volumes) {\n          time.push(dataObj[0]);\n          volume.push(dataObj[1]);\n        }\n        console.log(volume);\n\n        for (var i = 0; i < volume.length; i = i + 4) {\n          volumeSmaller.push(volume[i]);\n        }\n        for (var i = 0; i < timeSmallerAndConverted.length; i = i + 4) {\n          timeSmallerAndConvertedForVolume.push(timeSmallerAndConverted[i]);\n        }\n        setChartData({\n          labels: timeSmallerAndConverted,\n          datasets: [\n            {\n              label: \"Price\",\n              backgroundColor: \"#5C68FF\",\n\n              borderWidth: \"0px\",\n              data: priceSmaller,\n            },\n          ],\n        });\n        setChartVol({\n          labels: timeSmallerAndConvertedForVolume,\n          datasets: [\n            {\n              label: \"Volume\",\n              backgroundColor: \"#323232\",\n              borderColor: \"rgba(135, 99, 225, 1)\",\n              data: volumeSmaller,\n            },\n          ],\n        });\n\n        setRedraw(true);\n        setRedraw(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  useEffect(() => {\n    chart(props);\n  }, [props]);\n  return (\n    <div className=\"charts-div\">\n      <td className=\"charts\">\n        <p className=\"chart-name\">Price</p>\n        <Line\n          redraw={redraw}\n          data={chartData}\n          options={{\n            legend: {\n              display: false,\n            },\n            tooltips: {\n              displayColors: false,\n              mode: \"x-axis\",\n\n              backgroundColor: \"#FFFFFF\",\n              bodyFontColor: \"#323232\",\n              titleFontColor: \"#323232\",\n              borderWidth: 1,\n              borderColor: \"#F0F0F0\",\n              callbacks: {\n                label: function (tooltipItems) {\n                  if (tooltipItems.yLabel > 1) {\n                    return (\n                      symbol +\n                      tooltipItems.yLabel\n                        .toString()\n                        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n                    );\n                  } else {\n                    return symbol + tooltipItems.yLabel.toString();\n                  }\n                },\n              },\n            },\n            responsive: true,\n            title: { text: \"THICCNESS SCALE\", display: false },\n            elements: {\n              point: {\n                radius: 4,\n              },\n              line: {\n                tension: 0.05,\n              },\n            },\n            scales: {\n              yAxes: [\n                {\n                  ticks: {\n                    autoSkip: true,\n                    maxTicksLimit: 10,\n                    beginAtZero: false,\n                    fontColor: \"#323232\",\n                    callback: function (value) {\n                      if (value > 1) {\n                        return (\n                          props.currencysymbols +\n                          value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n                        );\n                      } else {\n                        return props.currencysymbols + value.toString();\n                      }\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n              xAxes: [\n                {\n                  ticks: {\n                    maxTicksLimit: 4,\n                    maxRotation: 0,\n                    minRotation: 0,\n                    fontColor: \"#323232\",\n                    callback: function (value) {\n                      return value.split(\",\")[0];\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n            },\n          }}\n        />\n      </td>\n      {mobileOrNot()}\n      <td className=\"charts-vol\">\n        <p className=\"chart-name\">Volume</p>\n        <Bar\n          redraw={redraw}\n          data={chartVol}\n          options={{\n            legend: {\n              display: false,\n            },\n            tooltips: {\n              displayColors: false,\n              mode: \"x-axis\",\n              backgroundColor: \"#FFFFFF\",\n              bodyFontColor: \"#323232\",\n              titleFontColor: \"#323232\",\n              borderWidth: 1,\n              borderColor: \"#F0F0F0\",\n              callbacks: {\n                label: function (tooltipItems) {\n                  return (\n                    symbol +\n                    tooltipItems.yLabel\n                      .toFixed(0)\n                      .toString()\n                      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n                  );\n                },\n              },\n            },\n            responsive: true,\n            title: { text: \"THICCNESS SCALE\", display: false },\n            elements: {\n              point: {\n                radius: 0,\n              },\n              line: {\n                tension: 0.05,\n              },\n            },\n            scales: {\n              yAxes: [\n                {\n                  ticks: {\n                    autoSkip: true,\n                    maxTicksLimit: 10,\n                    beginAtZero: false,\n                    fontColor: \"#323232\",\n                    callback: function (value) {\n                      return props.currencysymbols + convertToBillions(value);\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n              xAxes: [\n                {\n                  ticks: {\n                    maxTicksLimit: 4,\n                    maxRotation: 0,\n                    minRotation: 0,\n                    fontColor: \"#323232\",\n                    callback: function (value) {\n                      return value.split(\",\")[0];\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n            },\n          }}\n        />\n      </td>\n    </div>\n  );\n};\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}