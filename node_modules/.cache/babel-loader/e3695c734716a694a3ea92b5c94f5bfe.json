{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/amit/Desktop/Coinbook-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/amit/Desktop/Coinbook-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Line,Bar}from\"react-chartjs-2\";import axios from\"axios\";import moment from\"moment\";import\"./Chart.css\";import MoonPayPopup from\"../MoonPayPopup.js\";import{withTheme}from\"@material-ui/core\";var Chart=function Chart(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setChartData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),chartVol=_useState4[0],setChartVol=_useState4[1];var _useState5=useState(props.id),_useState6=_slicedToArray(_useState5,1),id=_useState6[0];var _useState7=useState(props.coinsOnMoonPay),_useState8=_slicedToArray(_useState7,1),coinsOnMoonPay=_useState8[0];var _useState9=useState(props.currency),_useState10=_slicedToArray(_useState9,1),currency=_useState10[0];var _useState11=useState(props.currencysymbols),_useState12=_slicedToArray(_useState11,1),symbol=_useState12[0];var _useState13=useState(props.days),_useState14=_slicedToArray(_useState13,1),days=_useState14[0];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),redraw=_useState16[0],setRedraw=_useState16[1];var convertToBillions=function convertToBillions(number){if(number>1000000){return(number/1000000000).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+\"B\";}else{return number;}};var mobileOrNot=function mobileOrNot(){var width=window.innerWidth;if(width>768){return/*#__PURE__*/React.createElement(React.Fragment,null);}else{return/*#__PURE__*/React.createElement(\"br\",null);}};var chart=function chart(props){var daysChart=props.days;var currency=props.currency;var symbol=props.currencysymbols;var time=[];var price=[];var priceSmaller=[];var volume=[];var volumeSmaller=[];var timeSmaller=[];var timeSmallerAndConvertedForVolume=[];var timeSmallerAndConverted=[];var whichCoin=id;function roundDownPrice(number){if(number>=1){var decimals=2;var amount=Math.floor(number*Math.pow(10,decimals))/Math.pow(10,decimals);return amount.toFixed(2);}else if(number>=0.001){var _decimals=6;return Math.floor(number*Math.pow(10,_decimals))/Math.pow(10,_decimals).toFixed(4);}else{var _decimals2=9;return Math.floor(number*Math.pow(10,_decimals2))/Math.pow(10,_decimals2);}}axios.get(\"https://api.coingecko.com/api/v3/coins/\".concat(whichCoin,\"/market_chart?vs_currency=\").concat(currency,\"&days=\").concat(daysChart)).then(function(res){console.log(res);var _iterator=_createForOfIteratorHelper(res.data.prices),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var dataObj=_step.value;time.push(dataObj[0]);price.push(dataObj[1]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(price);for(var i=0;i<price.length;i=i+1){priceSmaller.push(roundDownPrice(price[i]));}for(var i=0;i<time.length;i++){timeSmaller.push(time[i]);}for(var i=0;i<timeSmaller.length;i++){timeSmallerAndConverted.push(moment(timeSmaller[i]).format(\"lll\"));}var _iterator2=_createForOfIteratorHelper(res.data.total_volumes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _dataObj=_step2.value;time.push(_dataObj[0]);volume.push(_dataObj[1]);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}console.log(volume);for(var i=0;i<volume.length;i=i+4){volumeSmaller.push(volume[i]);}for(var i=0;i<timeSmallerAndConverted.length;i=i+4){timeSmallerAndConvertedForVolume.push(timeSmallerAndConverted[i]);}setChartData({labels:timeSmallerAndConverted,datasets:[{label:\"Price\",backgroundColor:\"rgba(96, 93, 243)\",borderWidth:\"0px\",data:priceSmaller}]});setChartVol({labels:timeSmallerAndConvertedForVolume,datasets:[{label:\"Volume\",backgroundColor:\"rgba(255, 114, 211, 1)\",borderColor:\"rgba(135, 99, 225, 1)\",data:volumeSmaller}]});setRedraw(true);setRedraw(false);}).catch(function(err){console.log(err);});};useEffect(function(){chart(props);},[props]);return/*#__PURE__*/React.createElement(\"div\",{className:\"charts-div\"},/*#__PURE__*/React.createElement(\"td\",{className:\"charts\"},/*#__PURE__*/React.createElement(\"p\",{className:\"chart-name\"},\"Price\"),/*#__PURE__*/React.createElement(Line,{redraw:redraw,data:chartData,options:{legend:{display:false},tooltips:{displayColors:false,mode:\"x-axis\",backgroundColor:\"rgb(255, 129, 0)\",bodyFontColor:\"#FFFFFF\",titleFontColor:\"#FFFFFF\",borderWidth:1,borderColor:\"rgb(226, 207, 213)\",callbacks:{label:function label(tooltipItems){if(tooltipItems.yLabel>1){return symbol+tooltipItems.yLabel.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");}else{return symbol+tooltipItems.yLabel.toString();}}}},responsive:true,title:{text:\"THICCNESS SCALE\",display:false},elements:{point:{radius:0},line:{tension:0.05}},scales:{yAxes:[{ticks:{autoSkip:true,maxTicksLimit:10,beginAtZero:false,fontColor:\"#FFFFFF\",callback:function callback(value){if(value>1){return props.currencysymbols+value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");}else{return props.currencysymbols+value.toString();}}},gridLines:{display:false}}],xAxes:[{ticks:{maxTicksLimit:4,maxRotation:0,minRotation:0,fontColor:\"#FFFFFF\",callback:function callback(value){return value.split(\",\")[0];}},gridLines:{display:false}}]}}})),mobileOrNot(),/*#__PURE__*/React.createElement(\"td\",{className:\"charts-vol\"},/*#__PURE__*/React.createElement(\"p\",{className:\"chart-name\"},\"Volume\"),/*#__PURE__*/React.createElement(Bar,{redraw:redraw,data:chartVol,options:{legend:{display:false},tooltips:{displayColors:false,mode:\"x-axis\",backgroundColor:\"rgb(124, 76, 255)\",bodyFontColor:\"#FFFFFF\",titleFontColor:\"#FFFFFF\",borderWidth:1,borderColor:\"rgb(226, 207, 213)\",callbacks:{label:function label(tooltipItems){return symbol+tooltipItems.yLabel.toFixed(0).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");}}},responsive:true,title:{text:\"THICCNESS SCALE\",display:false},elements:{point:{radius:0},line:{tension:0.05}},scales:{yAxes:[{ticks:{autoSkip:true,maxTicksLimit:10,beginAtZero:false,fontColor:\"#FFFFFF\",callback:function callback(value){return props.currencysymbols+convertToBillions(value);}},gridLines:{display:false}}],xAxes:[{ticks:{maxTicksLimit:4,maxRotation:0,minRotation:0,fontColor:\"#FFFFFF\",callback:function callback(value){return value.split(\",\")[0];}},gridLines:{display:false}}]}}})));};export default Chart;","map":{"version":3,"sources":["/Users/amit/Desktop/Coinbook-master/src/components/Chart/Chart.js"],"names":["React","useState","useEffect","Line","Bar","axios","moment","MoonPayPopup","withTheme","Chart","props","chartData","setChartData","chartVol","setChartVol","id","coinsOnMoonPay","currency","currencysymbols","symbol","days","redraw","setRedraw","convertToBillions","number","toString","replace","mobileOrNot","width","window","innerWidth","chart","daysChart","time","price","priceSmaller","volume","volumeSmaller","timeSmaller","timeSmallerAndConvertedForVolume","timeSmallerAndConverted","whichCoin","roundDownPrice","decimals","amount","Math","floor","pow","toFixed","get","then","res","console","log","data","prices","dataObj","push","i","length","format","total_volumes","labels","datasets","label","backgroundColor","borderWidth","borderColor","catch","err","legend","display","tooltips","displayColors","mode","bodyFontColor","titleFontColor","callbacks","tooltipItems","yLabel","responsive","title","text","elements","point","radius","line","tension","scales","yAxes","ticks","autoSkip","maxTicksLimit","beginAtZero","fontColor","callback","value","gridLines","xAxes","maxRotation","minRotation","split"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport \"./Chart.css\";\nimport MoonPayPopup from \"../MoonPayPopup.js\";\nimport { withTheme } from \"@material-ui/core\";\n\nconst Chart = (props) => {\n  const [chartData, setChartData] = useState({});\n  const [chartVol, setChartVol] = useState({});\n  const [id] = useState(props.id);\n  const [coinsOnMoonPay] = useState(props.coinsOnMoonPay);\n  const [currency] = useState(props.currency);\n  const [symbol] = useState(props.currencysymbols);\n  const [days] = useState(props.days);\n  const [redraw, setRedraw] = useState({});\n  const convertToBillions = (number) => {\n    if (number > 1000000) {\n      return (\n        (number / 1000000000).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") +\n        \"B\"\n      );\n    } else {\n      return number;\n    }\n  };\n  const mobileOrNot = () => {\n    let width = window.innerWidth;\n    if (width > 768) {\n      return <></>;\n    } else {\n      return <br />;\n    }\n  };\n  const chart = (props) => {\n    let daysChart = props.days;\n    let currency = props.currency;\n    let symbol = props.currencysymbols;\n    let time = [];\n    let price = [];\n    let priceSmaller = [];\n    let volume = [];\n    let volumeSmaller = [];\n    let timeSmaller = [];\n    let timeSmallerAndConvertedForVolume = [];\n\n    let timeSmallerAndConverted = [];\n    let whichCoin = id;\n    function roundDownPrice(number) {\n      if (number >= 1) {\n        const decimals = 2;\n        const amount =\n          Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals);\n        return amount.toFixed(2);\n      } else if (number >= 0.001) {\n        const decimals = 6;\n        return (\n          Math.floor(number * Math.pow(10, decimals)) /\n          Math.pow(10, decimals).toFixed(4)\n        );\n      } else {\n        const decimals = 9;\n        return (\n          Math.floor(number * Math.pow(10, decimals)) / Math.pow(10, decimals)\n        );\n      }\n    }\n    axios\n      .get(\n        `https://api.coingecko.com/api/v3/coins/${whichCoin}/market_chart?vs_currency=${currency}&days=${daysChart}`\n      )\n      .then((res) => {\n        console.log(res);\n        for (const dataObj of res.data.prices) {\n          time.push(dataObj[0]);\n          price.push(dataObj[1]);\n        }\n        console.log(price);\n\n        for (var i = 0; i < price.length; i = i + 1) {\n          priceSmaller.push(roundDownPrice(price[i]));\n        }\n        for (var i = 0; i < time.length; i++) {\n          timeSmaller.push(time[i]);\n        }\n        for (var i = 0; i < timeSmaller.length; i++) {\n          timeSmallerAndConverted.push(moment(timeSmaller[i]).format(\"lll\"));\n        }\n        for (const dataObj of res.data.total_volumes) {\n          time.push(dataObj[0]);\n          volume.push(dataObj[1]);\n        }\n        console.log(volume);\n\n        for (var i = 0; i < volume.length; i = i + 4) {\n          volumeSmaller.push(volume[i]);\n        }\n        for (var i = 0; i < timeSmallerAndConverted.length; i = i + 4) {\n          timeSmallerAndConvertedForVolume.push(timeSmallerAndConverted[i]);\n        }\n        setChartData({\n          labels: timeSmallerAndConverted,\n          datasets: [\n            {\n              label: \"Price\",\n              backgroundColor: \"rgba(96, 93, 243)\",\n\n              borderWidth: \"0px\",\n              data: priceSmaller,\n            },\n          ],\n        });\n        setChartVol({\n          labels: timeSmallerAndConvertedForVolume,\n          datasets: [\n            {\n              label: \"Volume\",\n              backgroundColor: \"rgba(255, 114, 211, 1)\",\n              borderColor: \"rgba(135, 99, 225, 1)\",\n              data: volumeSmaller,\n            },\n          ],\n        });\n\n        setRedraw(true);\n        setRedraw(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  useEffect(() => {\n    chart(props);\n  }, [props]);\n  return (\n    <div className=\"charts-div\">\n      <td className=\"charts\">\n        <p className=\"chart-name\">Price</p>\n        <Line\n          redraw={redraw}\n          data={chartData}\n          options={{\n            legend: {\n              display: false,\n            },\n            tooltips: {\n              displayColors: false,\n              mode: \"x-axis\",\n\n              backgroundColor: \"rgb(255, 129, 0)\",\n              bodyFontColor: \"#FFFFFF\",\n              titleFontColor: \"#FFFFFF\",\n              borderWidth: 1,\n              borderColor: \"rgb(226, 207, 213)\",\n              callbacks: {\n                label: function (tooltipItems) {\n                  if (tooltipItems.yLabel > 1) {\n                    return (\n                      symbol +\n                      tooltipItems.yLabel\n                        .toString()\n                        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n                    );\n                  } else {\n                    return symbol + tooltipItems.yLabel.toString();\n                  }\n                },\n              },\n            },\n            responsive: true,\n            title: { text: \"THICCNESS SCALE\", display: false },\n            elements: {\n              point: {\n                radius: 0,\n              },\n              line: {\n                tension: 0.05,\n              },\n            },\n            scales: {\n              yAxes: [\n                {\n                  ticks: {\n                    autoSkip: true,\n                    maxTicksLimit: 10,\n                    beginAtZero: false,\n                    fontColor: \"#FFFFFF\",\n                    callback: function (value) {\n                      if (value > 1) {\n                        return (\n                          props.currencysymbols +\n                          value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n                        );\n                      } else {\n                        return props.currencysymbols + value.toString();\n                      }\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n              xAxes: [\n                {\n                  ticks: {\n                    maxTicksLimit: 4,\n                    maxRotation: 0,\n                    minRotation: 0,\n                    fontColor: \"#FFFFFF\",\n                    callback: function (value) {\n                      return value.split(\",\")[0];\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n            },\n          }}\n        />\n      </td>\n      {mobileOrNot()}\n      <td className=\"charts-vol\">\n        <p className=\"chart-name\">Volume</p>\n        <Bar\n          redraw={redraw}\n          data={chartVol}\n          options={{\n            legend: {\n              display: false,\n            },\n            tooltips: {\n              displayColors: false,\n              mode: \"x-axis\",\n              backgroundColor: \"rgb(124, 76, 255)\",\n              bodyFontColor: \"#FFFFFF\",\n              titleFontColor: \"#FFFFFF\",\n              borderWidth: 1,\n              borderColor: \"rgb(226, 207, 213)\",\n              callbacks: {\n                label: function (tooltipItems) {\n                  return (\n                    symbol +\n                    tooltipItems.yLabel\n                      .toFixed(0)\n                      .toString()\n                      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n                  );\n                },\n              },\n            },\n            responsive: true,\n            title: { text: \"THICCNESS SCALE\", display: false },\n            elements: {\n              point: {\n                radius: 0,\n              },\n              line: {\n                tension: 0.05,\n              },\n            },\n            scales: {\n              yAxes: [\n                {\n                  ticks: {\n                    autoSkip: true,\n                    maxTicksLimit: 10,\n                    beginAtZero: false,\n                    fontColor: \"#FFFFFF\",\n                    callback: function (value) {\n                      return props.currencysymbols + convertToBillions(value);\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n              xAxes: [\n                {\n                  ticks: {\n                    maxTicksLimit: 4,\n                    maxRotation: 0,\n                    minRotation: 0,\n                    fontColor: \"#FFFFFF\",\n                    callback: function (value) {\n                      return value.split(\",\")[0];\n                    },\n                  },\n                  gridLines: {\n                    display: false,\n                  },\n                },\n              ],\n            },\n          }}\n        />\n      </td>\n    </div>\n  );\n};\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}