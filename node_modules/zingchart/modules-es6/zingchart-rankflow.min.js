/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.1_ES6
*/
zingchart.setModule("rankflow"),function(){var t,e;ZC.ZCRankFlow=((t=function(){this.AFB="palette",this.C1="#6a921f",this.BP=[],this.KE=!1,this.AGH=function(){for(var t=(16777215*Math.random()+1<<0).toString(16);t.length<6;)t="0"+t;return"#"+t}}).getDefaults=function(e){var a={};return ZC._cp_(t.B7,a),t.O6[e]&&ZC._cp_(t.O6[e],a),a},t.B7={},t.O6={light:{item:{bold:!0,color:"#808285"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},dark:{item:{bold:!0,color:"#D1D3D4"},"rank-side":{generated:!0,color:"#fff",bold:!0,"background-color":"#929497"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#57585B"},flow:{generated:!0,shadow:!1}},classic:{item:{bold:!0,color:"#D1D2D3"},"rank-side":{generated:!0,color:"#000",bold:!0,"background-color":"#999"},"rank-overall":{generated:!0,color:"#fff",bold:!0,"background-color":"#333"},flow:{generated:!0,shadow:!0}}},t);var a=0,r=0,l=null;zingchart.bind(null,"label_click",function(t){var e=zingchart.getLoader(t.id);if(e){var o=zingchart.getGraph(e,t.graphid);if(o&&"rankflow"===o.o.type){if(!l){l={};for(var n=0;n<a;n++)l["s"+n]=!1}if("box_overall_"===t.labelid.substring(0,12)){var _=ZC._i_(t.labelid.split("_")[2]);l["s"+_]=!l["s"+_],function(t){var e,o=[],n=[],_=!1;for(e=0;e<a;e++)_=_||l["s"+e];for(e=0;e<a;e++){o.push({id:"flow_"+e,alpha:l["s"+e]||!_?1:.25}),n.push({id:"box_overall_"+e,alpha:l["s"+e]||!_?1:.25});for(var p=0;p<r;p++)n.push({id:"box_"+e+"_"+p,alpha:l["s"+e]||!_?1:.25,"text-alpha":l["s"+e]||!_?1:.25})}zingchart.exec(t.id,"updateobject",{type:"shape",graphid:t.graphid,data:o,update:!1}),zingchart.exec(t.id,"updateobject",{type:"label",graphid:t.graphid,data:n,update:!1}),zingchart.exec(t.id,"repaintobjects",{graphid:t.graphid})}(t)}}}}),zingchart.bind(null,"dataparse",function(t,l){var o,n,_,p,i,c,h=zingchart.getLoader(t.id);zingchart.initThemes(h);for(var d=ZC.ZCRankFlow.getDefaults(t.theme),g=0,C=l[ZC._[16]].length;g<C;g++)if(l[ZC._[16]][g].type&&"rankflow"===l[ZC._[16]][g].type){var Z=l[ZC._[16]][g].type,s=l[ZC._[16]][g];ZC._todash_(s);var f={};s.options&&(f=s.options[Z]||s.options),ZC._todash_(f);var u=f.style||{},x=zingchart.getGraphInfo(h,l,g);s.shapes||(s.shapes=[]),s[ZC._[10]]||(s[ZC._[10]]=[]),e=new ZC.ZCRankFlow;var b=!0;null!==ZC._n_(o=f["global-ranking"])&&(b=ZC._b_(o)),null!==ZC._n_(o=f["color-type"])&&(e.AFB=o),null!==ZC._n_(o=f.color)&&(e.C1=ZC.AP.G8(o)),null!==ZC._n_(o=f.palette)&&(e.BP=o),null!==ZC._n_(o=f.flat)&&(e.KE=ZC._b_(o));var k=[],v=[],w=s[ZC._[50]]||{};w.item=s[ZC._[50]].item||{},(o=w[ZC._[5]])&&(k=o),(o=w[ZC._[10]])&&(v=o);var y,m,B=s[ZC._[11]];for(n=0;n<B.length;n++)B[n].rank=B[n].rank||n+"";B.sort(function(t,e){return t.rank-e.rank});var z=0,I=0,A=0,F=0,D=0;for(n=0;n<v.length;n++)(m={}).text=v[n],ZC._cp_(d.item,m),ZC._cp_(m,w.item),(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),z=ZC.BQ(z,y.I),A=ZC.BQ(A,y.F);for(n=0;n<B.length;n++)p=B[n].style||{},m={text:B[n].text},ZC._cp_(u["item-flow"],m),ZC._cp_(p["item-flow"],m),(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),z=ZC.BQ(z,y.I),I=ZC.BQ(I,y.F);for(m={text:n,bold:!0},(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),(F=ZC.BQ(F,y.I))<I&&(F=I),m={generated:!0,text:n,bold:!0,width:2*F},ZC._cp_(u["rank-overall"],m),(y=zingchart.getInstance(h,"textbox")).append(m),y.parse(),(D=ZC.BQ(D,y.I))<I&&(D=I),a=B.length,r=ZC.BQ(k.length,v.length),n=0;n<a;n++)c=B[n].ranks||[],r=ZC.BQ(r,c.length);var Q,P=[0,0,0,0];if(null!==ZC._n_(o=f.margin))P=zingchart.getInstance(h,"box").m_(o,"all",x.plotarea.width,x.plotarea.height);x.plotarea.x+=P[3],x.plotarea.y+=P[0],x.plotarea.width-=P[1]+P[3],x.plotarea.height-=P[0]+P[2];var R=20;null!==ZC._n_(o=f["sep-space"])&&(R=ZC._i_(o)),b?Q=(x.plotarea.width-D-R-3*F-(r+1)*z)/(r-1):(R=0,Q=(x.plotarea.width-3*F-r*z)/(r-1));var E,G,O=ZC._i_((x.plotarea.height-A-B.length*I)/(B.length+1));if(null!==ZC._n_(o=f["col-space"])&&(Q=ZC._i_(o)),null!==ZC._n_(o=f["row-space"])&&(O=ZC._i_(o)),E=x.plotarea.x,G=x.plotarea.y,A>0)for(m={generated:!0,bold:!0,text:"OVERALL<br>RANK",flat:!0},ZC._cp_(w.item,m),ZC._cp_(u["label-overall"],m),ZC._cp_({x:E,y:G,width:D+z},m),b&&s[ZC._[10]].push(m),n=0;n<v.length;n++)E=x.plotarea.x+(b?D+z+R:0)+1.5*F+n*(z+Q),G=x.plotarea.y,m={generated:!0,bold:!0},ZC._cp_(w.item,m),ZC._cp_({x:E,y:G,width:z,flat:!0,text:v[n]},m),s[ZC._[10]].push(m);for(n=0;n<a;n++)E=x.plotarea.x+(b?D+z+R:0),G=x.plotarea.y+A+O+n*(I+O),m={},ZC._cp_(d["rank-side"],m),ZC._cp_(u["rank-left"],m),ZC._cp_({id:"rank_"+(n+1)+"_l",x:E,y:G,width:F,height:I,flat:!0,text:n+1},m),s[ZC._[10]].push(m),E=x.plotarea.x+(b?D+z+R:0)+2*F+r*(z+Q)-Q,m={},ZC._cp_(d["rank-side"],m),ZC._cp_(u["rank-right"],m),ZC._cp_({id:"rank_"+(n+1)+"_r",x:E,y:G,width:F,height:I,flat:!0,text:n+1},m),s[ZC._[10]].push(m),E=x.plotarea.x,m={},ZC._cp_(d["rank-overall"],m),ZC._cp_(u["rank-overall"],m),ZC._cp_({id:"rank_"+(n+1)+"_g",x:E,y:G,width:D,height:I,flat:!0,text:n+1},m),b&&s[ZC._[10]].push(m);for(n=0;n<B.length;n++){if(p=B[n].style||{},i=e.C1,"palette"===e.AFB)if(e.BP.length>0)i=e.BP[n%e.BP.length];else i=zingchart.getPalette(h,n,"bar")[1];else"random"===e.AFB&&(i=e.AGH());E=x.plotarea.x+D,G=x.plotarea.y+A+O+n*(I+O),-1!==(B[n].ranks||-1)&&(m={generated:!0,"background-color":i,color:"#fff"},ZC._cp_(u["item-overall"],m),ZC._cp_(p["item-overall"],m),ZC._cp_({id:"box_overall_"+n,x:E,y:G,width:z,height:I,flat:e.KE,text:B[n].text},m),b&&s[ZC._[10]].push(m)),c=B[n].ranks;var K=[];for(_=0;_<c.length;_++){E=x.plotarea.x+(b?D+z+R:0)+1.5*F+_*(z+Q),G=x.plotarea.y+A+O+(c[_]-1)*(I+O),K.push([E,G]),K.push([E+z,G]);var L={"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10,text:"%text ranked on %rank at %scale-value"};for(var j in ZC._cp_(u.tooltip,L),ZC._cp_(p.tooltip,L),L.text=L.text.replace(/%text/gi,B[n].text).replace(/%rank/gi,c[_]).replace(/%scale-value/gi,k[_]),B[n])-1!==j.indexOf("data-")&&(L.text=L.text.replace(new RegExp("%"+j,"g"),B[n][j][_]||""));m={generated:!0,color:"#fff"},ZC._cp_(u["item-flow"],m),ZC._cp_(p["item-flow"],m),ZC._cp_({id:"box_"+n+"_"+_,x:E,y:G,width:z,height:I,text:B[n].text,tooltip:L},m),s[ZC._[10]].push(m)}for(K.push([E+z,G+I]),_=c.length-1;_>=0;_--)E=x.plotarea.x+(b?D+z+R:0)+1.5*F+_*(z+Q),G=x.plotarea.y+A+O+(c[_]-1)*(I+O),K.push([E+z,G+I]),K.push([E,G+I]);K.push([E,G]);var H={};H[ZC._[0]]=i,ZC._cp_(d.flow,H),ZC._cp_(s.plot,H),ZC._cp_(B[n],H),ZC._cp_(u.flow,H),ZC._cp_(p.flow,H),ZC._cp_({id:"flow_"+n,type:"poly",points:K,flat:!0,label:{visible:!1}},H),s.shapes.push(H)}}return l})}();